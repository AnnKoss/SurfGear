[Главная](../main.md)

# Диалоги 

Для разделения ответственности и возможности показывать диалоги с виджет модели используется DefaultDialogController для обычных диалогов и
DatePickerDialogController - для выбора даты. Виджеты, используемые контроллерами для отображения диалоговых окон,
автоматически определяют исполняемую среду и адаптируют диалоговое окно в нативный вид.

# Примечание

- Кастомизация внешнего вида диалогового окна происходит в ui слое.

- Вызов диалогового окна совершается из WidgetModel.

Кастомизация внешнего вида и вызов диалогов во Flutter происходит в одном месте. Такой подход
нарушет принцип единственной ответственности и ухудшает читабельность и тестируемость кода.
В связи с этим, чтобы не нарушать принципы CleanArchitecture был разработан свой подход в использовании диалоговых окон.

Решением стал mixin DialogOwner. Эта сущность реализуется на экране где будут использоваться диалоги и
передается в DefaultDialogController, который используется в WidgetModel текущего экрана и содержит карту именованных WidgetBuilder'ов,
в которых хранятся кастомные интерфейсы диалогов. Поэтому, когда из WidgetModel происходит вызов диалога по имени,
в DialogController попадает тот ui, который был определен на ui слое. Таким образом ui слой отвечает только за настройку внешнего вида,
а WidgetModel - за логику открытия диалогов.

# Виды диалогов

- AlertDialog - всплывающее окно. 

- ModalSheet - модальное всплывающее окно, которое появляется снизу экрана.
Имеет кастомизируемый ui. Для настройки внешнего вида, использутеся WidgetBuilder,
который хранится в ```Map<dynamic, WidgetBuilder> registeredDialogs``` в миксине DialogOwner.
    
- Sheet - обычное всплывающее окно. Принцип работы такой же как у ModalSheet

- DatePicker - всплывающее окно с выбором даты. Для получения даты из DatePicker, необходимо
совершить подписку на метод show(), который представляет реактивный поток, в который возвращается
выбраная дата.