# Организация  Flavors в  Flutter

## Для чего нужны флейворы

Представьте ситуацию: есть приложение с аналитикой. Есть команда разработки, тестировщики, и конечные пользователи. И те и те пользуются одной версией приложения.

Допустим мы хотим проанализировать наскаолько пользователям интересна фича А. Что в этом случае мы делаем? Идем в аналитику и смотрим сколько было использований данной фичи(например переходов на экран). Но что же мы видим: запредельное число переходов, которое ну никак не возможно с текущей аудиторией, причем все эти переходы были в какой то определенный отрезок времени. Мы идем дальше и понимаем, что в это время проводились тесты данной фичи. А чуть ранее ее разработка. При этом аналитика также отсылалась.
Итог: аналитика получается грязной и некачественной.

Здесь можно заменить слово аналитика на любое другое: пуш-нотификации, креш-репортинг и etc.

И в этой ситуации нас спасает разделение приложения на две версии отличающиеся минимально, например Bundle ID(package-name). Разработчики и тестеры используют только специальную  dev версию, а пользователи продовую.

Это как раз и есть одна из задач флейворов. Здесь будет использоваться именно flavor так как имеено это название используется Flutter'ом. Вообще люди, знакомые с Android-разработкой думаю сразу узнали этот механизм.

## Flavouring Flutter ?

Хорошо, мы разобрались с задачей. Но как это реализовать? Все ли так просто как много где пишут?

Давайте сразу определимся - организация флейворов - это чисто нативная задача. Сама информация о них не будет доступна из dart кода. Поэтому и за способами организации мы пойдем в нативную мобильную разработку.

### Android

 Здесь все просто. Ничем не отличается от стандартных путей в андроид.
 Конечно может возникнуть вопрос - а почему бы не использовать buildType, но об этом позже.

 Итак, все что нам потребуется в минимальном варианте:

 ```groovy
 flavorDimensions "release-type"

    productFlavors {
        dev {
            dimension "release-type"
            applicationIdSuffix  ".dev"
            versionNameSuffix "-dev"
        }

        prod {
            dimension "release-type"
        }
    }
```

И все, теперь мы можем с легкостью запустить команду :
```
flutter run --flavor dev
```
на нашем андроид девайсе.

У некоторых вдумчивых разработчиков может возникнуть вопрос: а почему не buildType? Отвечаю: команда флаттера захардкодила билд тайпы под свои нужды. Собственно, вся магия дебаг сборки в этом и заключается.

//туду